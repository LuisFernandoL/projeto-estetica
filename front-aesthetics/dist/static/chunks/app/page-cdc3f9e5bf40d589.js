(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5128:function(e,t,r){Promise.resolve().then(r.t.bind(r,1749,23)),Promise.resolve().then(r.t.bind(r,5250,23)),Promise.resolve().then(r.bind(r,3606)),Promise.resolve().then(r.bind(r,470))},470:function(e,t,r){"use strict";r.r(t);var o=r(7437),s=r(4669),n=r(8910);t.default=e=>{let{product:t}=e,{deleteProduct:r}=(0,s.useProduct)();return(0,o.jsx)("div",{children:(0,o.jsx)("button",{type:"button",onClick:()=>{window.confirm("tem certeza que deseja excluir esse produto ?")&&r(t.id)},className:"bg-red-500 text-white px-4 py-2 rounded-md cursor-pointer",children:(0,o.jsx)(n.Uop,{})})})}},7036:function(e,t,r){"use strict";r.d(t,{F:function(){return s}});var o=r(171);let s=e=>{let{message:t,isSucess:r=!1}=e;return r?o.toast.success(t,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}):o.toast.error(t,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}},4669:function(e,t,r){"use strict";r.r(t),r.d(t,{ProductProvider:function(){return d},useProduct:function(){return g}});var o=r(7437),s=r(2265),n=r(4033),a=r(1633),A=r(7713),i=r(4578);let c=i.z.object({id:i.z.string(),name:i.z.string(),description:i.z.string(),price:i.z.string(),cover_image:i.z.string()});c.omit({id:!0,cover_image:!0});var u=r(7036);let l=(0,s.createContext)({});function d(e){let{children:t}=e,r=(0,n.useRouter)(),[i,d]=(0,s.useState)([]),[g,h]=(0,s.useState)({}),[p,m]=(0,s.useState)(0),f=(0,A.getCookie)("aesthetics.token");f&&(a.Z.defaults.headers.common.authorization="Bearer ".concat(f));let[C,E]=(0,s.useState)({id:"",name:"",description:"",price:"",cover_image:""}),[v,w]=(0,s.useState)(null),b=async(e,t)=>{let r=new FormData;return t.name.includes("jpg")?(r.append("cover_image",t),{status:await a.Z.patch("/products/upload/".concat(e),r,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.status)}):{status:400}},y=async(e,t)=>{try{let r=(0,A.getCookie)("aesthetics.token"),{data:o}=await a.Z.patch("/products/".concat(t," "),e,{headers:{Authorization:"Bearer ".concat(r)}}),s=i.filter(e=>e.id!==t);d([...s,o]),(0,n.redirect)("/")}catch(e){}};return(0,o.jsx)(l.Provider,{value:{coverImage:v,setCoverImage:w,page:p,setPage:m,productInfo:C,setProductInfo:E,createProduct:()=>{a.Z.post("/products",c.parse(C)).then(e=>(E(t=>({...t,id:e.data.id})),b(e.data.id,v))).then(e=>{200===e.status&&(0,u.F)({message:"Produto cadastrado com sucesso",isSucess:!0}),r.push("/")}).catch(e=>{console.log(e),(0,u.F)({message:"Erro ao cadastrar o produto"})})},updateProduct:y,deleteProduct:e=>{a.Z.delete("/products/".concat(e)).then(()=>{(0,u.F)({message:"Produto deletado com sucesso",isSucess:!0}),window.location.reload()}).catch(e=>{console.log(e),(0,u.F)({message:"Erro ao deletar o produto"})})},editing:g},children:t})}let g=()=>(0,s.useContext)(l)},1633:function(e,t,r){"use strict";let o=r(2173).Z.create({baseURL:"https://estetica-db.onrender.com",timeout:5e3});t.Z=o},3606:function(e,t,r){"use strict";r.r(t),t.default={src:"/_next/static/media/transferir.89d53e78.jpeg",height:183,width:275,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABgEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAL0C/wD/xAAaEAACAwEBAAAAAAAAAAAAAAABAgMRIQAx/9oACAEBAAE/AEdDAk5j1ipw16a7/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQIA/9oACAECAQE/AJBkd//EABgRAQEAAwAAAAAAAAAAAAAAAAECAAMR/9oACAEDAQE/ANqzaC8z/9k=",blurWidth:8,blurHeight:5}},1172:function(e,t,r){"use strict";r.d(t,{w_:function(){return i}});var o=r(2265),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=o.createContext&&o.createContext(s),a=function(){return(a=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},A=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)0>t.indexOf(o[s])&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};function i(e){return function(t){return o.createElement(c,a({attr:a({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return o.createElement(t.tag,a({key:r},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var r,s=e.attr,n=e.size,i=e.title,c=A(e,["attr","size","title"]),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),o.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,c,{className:r,style:a(a({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&o.createElement("title",null,i),e.children)};return void 0!==n?o.createElement(n.Consumer,null,function(e){return t(e)}):t(s)}}},function(e){e.O(0,[582,245,250,749,971,938,744],function(){return e(e.s=5128)}),_N_E=e.O()}]);