(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1890:function(e,t,o){Promise.resolve().then(o.bind(o,171)),Promise.resolve().then(o.t.bind(o,3385,23)),Promise.resolve().then(o.t.bind(o,8062,23)),Promise.resolve().then(o.t.bind(o,3649,23)),Promise.resolve().then(o.bind(o,142)),Promise.resolve().then(o.bind(o,4669))},7036:function(e,t,o){"use strict";o.d(t,{F:function(){return r}});var s=o(171);let r=e=>{let{message:t,isSucess:o=!1}=e;return o?s.toast.success(t,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}):s.toast.error(t,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}},142:function(e,t,o){"use strict";o.r(t),o.d(t,{AuthProvider:function(){return l},useAuth:function(){return d}});var s=o(7437),r=o(1633),a=o(4033),n=o(7713),i=o(2265),c=o(7036);let u=(0,i.createContext)({}),l=e=>{let{children:t}=e,[o,l]=(0,i.useState)(null),d=(0,a.useRouter)();return(0,i.useEffect)(()=>{let e=(0,n.getCookie)("aesthetics.token");e&&r.Z.get("/users",{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{l(e.data)}).catch(e=>{console.error("Erro ao buscar dados do usu\xe1rio:",e)})},[]),(0,s.jsx)(u.Provider,{value:{user:o,setUser:l,register:e=>{r.Z.post("/users",e).then(()=>{(0,c.F)({message:"Usu\xe1rio cadastrado com sucesso",isSucess:!0}),d.push("/login")}).catch(e=>{console.log(e),(0,c.F)({message:"Erro ao criar usu\xe1rio, tente utilizar outro e-mail"})})},login:e=>{r.Z.post("/login",e).then(e=>{(0,n.setCookie)("aesthetics.token",e.data.token,{maxAge:1800})}).then(()=>{(0,c.F)({message:"Login realizado com sucesso",isSucess:!0}),d.push("/")}).catch(e=>{console.log(e),(0,c.F)({message:"Erro ao logar, verifique se o e-mail e senha est\xe3o corretos"})})},logout:()=>{l(null),(0,n.setCookie)("aesthetics.token","",{expires:new Date(0),path:"/"})}},children:t})},d=()=>(0,i.useContext)(u)},4669:function(e,t,o){"use strict";o.r(t),o.d(t,{ProductProvider:function(){return h},useProduct:function(){return g}});var s=o(7437),r=o(2265),a=o(4033),n=o(1633),i=o(7713),c=o(4578);let u=c.z.object({id:c.z.string(),name:c.z.string(),description:c.z.string(),price:c.z.string(),cover_image:c.z.string()});u.omit({id:!0,cover_image:!0});var l=o(7036);let d=(0,r.createContext)({});function h(e){let{children:t}=e,o=(0,a.useRouter)(),[c,h]=(0,r.useState)([]),[g,m]=(0,r.useState)({}),[p,f]=(0,r.useState)(0),v=(0,i.getCookie)("aesthetics.token");v&&(n.Z.defaults.headers.common.authorization="Bearer ".concat(v));let[_,k]=(0,r.useState)({id:"",name:"",description:"",price:"",cover_image:""}),[P,C]=(0,r.useState)(null),b=async(e,t)=>{let o=new FormData;return t.name.includes("jpg")?(o.append("cover_image",t),{status:await n.Z.patch("/products/upload/".concat(e),o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.status)}):{status:400}},F=async(e,t)=>{try{let o=(0,i.getCookie)("aesthetics.token"),{data:s}=await n.Z.patch("/products/".concat(t," "),e,{headers:{Authorization:"Bearer ".concat(o)}}),r=c.filter(e=>e.id!==t);h([...r,s]),(0,a.redirect)("/")}catch(e){}};return(0,s.jsx)(d.Provider,{value:{coverImage:P,setCoverImage:C,page:p,setPage:f,productInfo:_,setProductInfo:k,createProduct:()=>{n.Z.post("/products",u.parse(_)).then(e=>(k(t=>({...t,id:e.data.id})),b(e.data.id,P))).then(e=>{200===e.status&&(0,l.F)({message:"Produto cadastrado com sucesso",isSucess:!0}),o.push("/")}).catch(e=>{console.log(e),(0,l.F)({message:"Erro ao cadastrar o produto"})})},updateProduct:F,deleteProduct:e=>{n.Z.delete("/products/".concat(e)).then(()=>{(0,l.F)({message:"Produto deletado com sucesso",isSucess:!0}),window.location.reload()}).catch(e=>{console.log(e),(0,l.F)({message:"Erro ao deletar o produto"})})},editing:g},children:t})}let g=()=>(0,r.useContext)(d)},1633:function(e,t,o){"use strict";let s=o(2173).Z.create({baseURL:"https://estetica-db.onrender.com",timeout:5e3});t.Z=s},8062:function(){},3385:function(){},3649:function(e){e.exports={style:{fontFamily:"'__Inter_e66fe9', '__Inter_Fallback_e66fe9'",fontStyle:"normal"},className:"__className_e66fe9"}}},function(e){e.O(0,[245,971,938,744],function(){return e(e.s=1890)}),_N_E=e.O()}]);