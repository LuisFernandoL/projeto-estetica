(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{8030:function(e,t,s){Promise.resolve().then(s.bind(s,186))},7036:function(e,t,s){"use strict";s.d(t,{F:function(){return a}});var r=s(171);let a=e=>{let{message:t,isSucess:s=!1}=e;return s?r.toast.success(t,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}):r.toast.error(t,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}},186:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(7437),a=s(4669),l=s(1396),o=s.n(l),c=s(2265),n=s(6673),i=s(3159),d=()=>{let{productInfo:e,setProductInfo:t,setCoverImage:s,createProduct:l}=(0,a.useProduct)(),d=(0,c.useCallback)(e=>{s(e[0])},[s]),{getRootProps:u,getInputProps:m}=(0,n.uI)({onDrop:d,accept:{"image/jpeg":[".jpg"]}});return(0,r.jsx)("div",{className:"container flex flex-col sm:min-w-[430px] md:min-w-[900px] lg:min-w-[1000px] justify-center items-center bg-gray-800 ",children:(0,r.jsxs)("div",{className:"flex flex-col w-4/5 sm:flex-wrap",children:[(0,r.jsx)("p",{className:"text-4xl my-6 font-semibold text-center",children:"Salvar Produto"}),(0,r.jsx)("div",{className:"flex flex-row justify-center mb-6",children:(0,r.jsx)("div",{className:" bg-blue-400 w-5 h-5 m-1 rounded-full"})}),(0,r.jsxs)("div",{className:"flex flex-wrap md:flex-nowrap items-center justify-center gap-2   ",children:[(0,r.jsx)("div",{className:"flex flex-col sm:min-w-[300px] md:w-1/2 ",children:(0,r.jsxs)("div",{className:"pr-6",children:[(0,r.jsx)("label",{htmlFor:"gender",className:"user-form-label",children:"Nome"}),(0,r.jsx)("div",{className:"mt-2 mb-12 ",children:(0,r.jsx)("input",{type:"text",className:"user-input-form  text-gray-950",placeholder:"Nome",onChange:s=>{t({...e,name:s.target.value})}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"year",className:"user-form-label",children:"Descri\xe7\xe3o"}),(0,r.jsx)("div",{className:"mt-2 mb-12",children:(0,r.jsx)("input",{type:"text",className:"user-input-form  text-gray-950",placeholder:"Descri\xe7\xe3o",onChange:s=>{t({...e,description:s.target.value})}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"user-form-label",children:"Pre\xe7o"}),(0,r.jsx)("div",{className:"mt-2 mb-12",children:(0,r.jsx)("input",{type:"text",className:"user-input-form  text-gray-950",placeholder:"Pre\xe7o",onChange:s=>{t({...e,price:s.target.value})}})})]})]})}),(0,r.jsxs)("div",{...u(),className:" flex flex-col sm:min-w-[300px] md:w-1/2 bg-blue-900 rounded-lg border-dashed border-2 border-gray-400",children:[(0,r.jsx)("label",{htmlFor:"dropzone-file",className:"cursor-pointer w-full h-full",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsx)(i.H3h,{className:" fill-gray-200 w-24 h-20 m-4"}),(0,r.jsx)("p",{className:"text-3xl",children:"Arrasta e solte a capa aqui"}),(0,r.jsx)("p",{className:"text-3xl mt-4",children:"- OU -"}),(0,r.jsx)("button",{className:"user-form-button w-48 my-8 text-gray-950",onClick:e=>e.preventDefault(),children:"Busque aqui"}),(0,r.jsx)("p",{className:"text-lg italic font-gray-200",children:"Formatos suportados: jpg"})]})}),(0,r.jsx)("input",{className:"hidden",...m()})]})]}),(0,r.jsx)("div",{className:"flex items-center justify-center md:justify-end",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center  py-5 gap-2",children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(o(),{href:"/",className:"user-form-button bg-pink-600 text-gray-950",children:"Voltar"})}),(0,r.jsx)("button",{className:"user-form-button text-gray-950",onClick:e=>{e.preventDefault(),l()},children:"Confirmar"})]})})]})})},u=()=>(0,r.jsx)("div",{children:(0,r.jsx)(d,{})})},4669:function(e,t,s){"use strict";s.r(t),s.d(t,{ProductProvider:function(){return m},useProduct:function(){return x}});var r=s(7437),a=s(2265),l=s(4033),o=s(1633),c=s(7713),n=s(4578);let i=n.z.object({id:n.z.string(),name:n.z.string(),description:n.z.string(),price:n.z.string(),cover_image:n.z.string()});i.omit({id:!0,cover_image:!0});var d=s(7036);let u=(0,a.createContext)({});function m(e){let{children:t}=e,s=(0,l.useRouter)(),[n,m]=(0,a.useState)([]),[x,h]=(0,a.useState)({}),[p,f]=(0,a.useState)(0),g=(0,c.getCookie)("aesthetics.token");g&&(o.Z.defaults.headers.common.authorization="Bearer ".concat(g));let[j,v]=(0,a.useState)({id:"",name:"",description:"",price:"",cover_image:""}),[N,b]=(0,a.useState)(null),y=async(e,t)=>{let s=new FormData;return t.name.includes("jpg")?(s.append("cover_image",t),{status:await o.Z.patch("/products/upload/".concat(e),s,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.status)}):{status:400}},w=async(e,t)=>{try{let s=(0,c.getCookie)("aesthetics.token"),{data:r}=await o.Z.patch("/products/".concat(t," "),e,{headers:{Authorization:"Bearer ".concat(s)}}),a=n.filter(e=>e.id!==t);m([...a,r]),(0,l.redirect)("/")}catch(e){}};return(0,r.jsx)(u.Provider,{value:{coverImage:N,setCoverImage:b,page:p,setPage:f,productInfo:j,setProductInfo:v,createProduct:()=>{o.Z.post("/products",i.parse(j)).then(e=>(v(t=>({...t,id:e.data.id})),y(e.data.id,N))).then(e=>{200===e.status&&(0,d.F)({message:"Produto cadastrado com sucesso",isSucess:!0}),s.push("/")}).catch(e=>{console.log(e),(0,d.F)({message:"Erro ao cadastrar o produto"})})},updateProduct:w,deleteProduct:e=>{o.Z.delete("/products/".concat(e)).then(()=>{(0,d.F)({message:"Produto deletado com sucesso",isSucess:!0}),window.location.reload()}).catch(e=>{console.log(e),(0,d.F)({message:"Erro ao deletar o produto"})})},editing:x},children:t})}let x=()=>(0,a.useContext)(u)},1633:function(e,t,s){"use strict";let r=s(2173).Z.create({baseURL:"https://estetica-db.onrender.com",timeout:5e3});t.Z=r}},function(e){e.O(0,[420,245,250,612,971,938,744],function(){return e(e.s=8030)}),_N_E=e.O()}]);